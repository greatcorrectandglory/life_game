# 反脆弱人生 RPG (Antifragile Life RPG)

基于非线性收益与动态不确定性的高保真人生模拟系统。

## 项目简介

这是一个具有高度理论深度与仿真精度的人生模拟器。核心目标是验证一个深刻的生存哲学：**在一个充满随机性与黑天鹅事件的复杂系统中，追求绝对的安稳是最大的风险，而主动挑战不确定性、构建反脆弱结构，才是获取最优生存结果的唯一数学解**。

## 核心特性

### 1. 认知吸收率矩阵
- **低熵活动**（如看《还珠格格》）：快速恢复情绪，但技能成长缓慢
- **中熵活动**（如普通学习）：平衡的收益与压力
- **高熵活动**（如深度思考）：高压力，但能构建深度思维模型

### 2. 艾宾浩斯衰减机制
- 重复进行相同活动会触发记忆衰减
- 技能需要间隔重复来维持效果
- 鼓励多样化的学习方式

### 3. 技能标签系统
- 支持技能跨行业迁移
- 拥有高可迁移性的技能在行业崩溃时更有价值

### 4. 宏观经济动态引擎
- 行业生命周期：萌芽 → 成长 → 成熟 → 衰退
- 动态经济周期影响工作收益
- 模拟真实世界的经济波动

### 5. 黑天鹅事件系统
- 随机触发极端事件
- 善缘池记录善行，后期获得回报
- 压力系统：良性压力促进成长，恶性压力导致崩溃

## 项目结构

```
/mnt/d/test/life/
├── src/
│   ├── core/              # 核心系统
│   │   ├── enhancedState.js  # 增强的状态管理
│   │   ├── engine.js         # 游戏引擎
│   │   ├── combat.js         # 战斗系统
│   │   ├── director.js       # 事件导演
│   │   ├── economy.js        # 经济系统
│   │   └── gameLoop.js       # 游戏循环
│   ├── systems/           # 游戏系统
│   │   ├── cognitive.js      # 认知吸收率系统
│   │   ├── skills.js         # 技能系统
│   │   └── events.js         # 事件系统
│   ├── ui/                # UI 组件
│   │   ├── components/       # UI 组件
│   │   ├── render.js         # 渲染器
│   │   └── combatUI.js       # 战斗 UI
│   ├── data/              # 游戏数据
│   │   ├── chapters.js       # 章节数据
│   │   ├── actions.js        # 行动数据
│   │   ├── skillsTree.js     # 技能树
│   │   ├── events.js         # 事件数据
│   │   ├── constants.js      # 常量
│   │   └── zones.js          # 地图区域
│   └── utils/             # 工具函数
│       ├── logger.js         # 日志系统
│       ├── helpers.js        # 辅助函数
│       └── saveSystem.js     # 存档系统
├── assets/                 # 图片资源
├── backup/                 # 备份目录
├── index.html             # 主页面
├── main.js                # 原始入口（已废弃）
├── styles.css             # 样式
└── package.json           # 项目配置
```

## 快速开始

### 安装依赖

```bash
npm install
```

### 开发模式

```bash
npm run dev
```

访问 http://localhost:3000

### 构建生产版本

```bash
npm run build
```

### 运行测试

```bash
npm run test
npm run test:ui  # UI 界面
```

### 代码检查和格式化

```bash
npm run lint       # 检查代码
npm run lint:fix   # 自动修复
npm run format     # 格式化代码
```

## 游戏机制

### 精力系统
- 每回合固定精力点数
- 不同行动消耗不同精力
- 回合结束恢复全部精力

### 技能系统
- 5 大类别：学术、职场、社交、创作、健康
- 每个类别 3 个技能，最多 3 级
- 使用技能点升级

### 任务系统
- 主线任务：推动章节进度
- 支线任务：提供额外奖励
- 剧情链：解锁特殊故事

### 压力系统
- 压力 < 15：正常状态
- 压力 > 15：触发压力解析
- **升华**：压力清零，全属性提升
- **崩溃**：跳过回合，属性减半

## 设计文档

详细的设计理念和技术文档请参阅：
- [人生模拟器头脑风暴.md](./人生模拟器头脑风暴.md) - 完整设计白皮书
- [OPTIMIZATION_SUGGESTIONS.md](./OPTIMIZATION_SUGGESTIONS.md) - 优化建议文档

## 技术栈

- **前端框架**: 原生 JavaScript (ES6 Modules)
- **构建工具**: Vite 5.0
- **测试框架**: Vitest
- **代码规范**: ESLint + Prettier
- **状态管理**: 自研响应式状态管理

## 核心设计理念

### 反脆弱性

反脆弱性是指从混乱和压力中获益的能力。在游戏中：
- 主动挑战不确定性获得奖励
- 避开风险会失去成长机会
- 波动性可以转化为收益

### 杠铃策略

最优资源配置方式：
- 60% 精力投入极度安全领域（保底）
- 30% 精力投入极度冒险领域（高收益）
- 避免中间地带（看似稳定但风险巨大）

### 凸性收益

投入与产出呈凸性关系：
- 初期投入收益低
- 后期投入收益指数增长
- 天赋可以推迟边际收益递减

## 开发路线图

### 已完成 ✅
- [x] 项目架构重构
- [x] 配置数据提取
- [x] 响应式状态管理
- [x] 存档/读档系统
- [x] 认知吸收率机制
- [x] 艾宾浩斯衰减
- [x] 技能标签系统

### 进行中 🚧
- [ ] 完善 UI 组件系统
- [ ] 添加类型检查 (TypeScript)
- [ ] 性能优化

### 计划中 📋
- [ ] 行业生命周期引擎
- [ ] AI 导演动态难度
- [ ] 完整实现设计文档功能
- [ ] 移动端适配
- [ ] 多语言支持

## 贡献指南

欢迎提交 Issue 和 Pull Request！

## 许可证

MIT License

## 致谢

本项目灵感来源于：
- 纳西姆·塔勒布的《反脆弱》
- 《中国式家长》游戏
- 《BitLife》游戏
- 《Victoria 3》经济系统
- 《RimWorld》叙事生成器
